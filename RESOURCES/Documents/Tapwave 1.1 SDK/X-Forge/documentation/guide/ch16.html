<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 16. Profile Analyzer</title><link rel="stylesheet" href="x-forge.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.54.1"><link rel="home" href="index.html" title="X-Forge Core 1.4.0 Guide"><link rel="up" href="pt06.html" title="Part VI. Tools"><link rel="previous" href="ch15.html" title="Chapter 15. CFL Creation Utility"><link rel="next" href="ch17.html" title="Chapter 17. GL Profile Analyzer"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#0000FF" alink="#FF0000"><div class="navbar"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 16. Profile Analyzer</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch15.html">Prev</a> </td><th width="60%" align="center">Part VI. Tools</th><td width="20%" align="right"> <a accesskey="n" href="ch17.html">Next</a></td></tr></table></div><div class="chapter"><div class="titlepage"><div><h2 class="title"><a name="id433858"></a>Chapter 16. Profile Analyzer</h2></div></div><p>
The sampling profiler included in the X-Forge core only works
under ARM PockerPC.
</p><p>
To use the sampling profiler, you must first link your application
with the sampling-enabled static library <tt>xfcorep.lib</tt> and 
<tt>toolhelp.lib</tt>. Next, set the compiler to output a <tt>.map</tt> file 
(project -&gt; settings -&gt; link, 'generate mapfile').
</p><p>
Next, add the following somewhere in the start of your application:
</p><pre class="programlisting">
    XFcProfiler::startSampler();
</pre><p>
and the following somewhere in the deinitialization:
</p><pre class="programlisting">
    XFcProfiler::endSampler();
</pre><p>
After these steps build your application, and run it on some
ARM based PocketPC device. If the application does not run,
the device does not contain <tt>toolhelp.dll</tt>. You can find this
by searching for it in the <tt>windows ce tools</tt> tree.
</p><p>
Let the application run for 15 minutes or longer, and then 
quit it. You should then have the sampling data on
the device. Copy this into a directory along with the <tt>.map</tt> file
that the compiler generated, and run profileanalyzer (included
in the 'other' directory) to generate profiling report.
</p><p>
The report is generated by running a thread at maximum priority
and sampling the current instruction pointer addresses of all
the threads in the program. As such the sampling is not even,
plus if you have a thread that loops a single function this will
be shown as a huge time eater. The sampling profiler does, however,
give some kind of overview on where all the time is spent.
</p></div><div class="navbar"><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch15.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="pt06.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ch17.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 15. CFL Creation Utility </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> Chapter 17. GL Profile Analyzer</td></tr></table></div><div align="center" style="padding-top: 5px;"><table><tr><td align="left"><a href="http://www.fathammer.com/"><img src="images/fathammer_logo.gif" border="0"></a></td><td>&nbsp; &nbsp; &nbsp; &nbsp;</td><td align="center" class="copyright">
                X-Forge Documentation<br>
                Confidential<br>
                Copyright &copy; 2003 Fathammer<br></td></tr></table></div></body></html>
