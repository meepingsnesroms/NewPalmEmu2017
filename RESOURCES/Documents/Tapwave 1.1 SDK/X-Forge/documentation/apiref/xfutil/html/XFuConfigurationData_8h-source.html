<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>XFuConfigurationData.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>XFuConfigurationData.h</h1><a href="XFuConfigurationData_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*! \file</span>
00002 <span class="comment"> * X-Forge Util &lt;br&gt;</span>
00003 <span class="comment"> * Copyright 2000-2003 Fathammer Ltd</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * $Id: XFuConfigurationData.h,v 1.17 2003/08/12 13:33:52 lars Exp $</span>
00006 <span class="comment"> * $Date: 2003/08/12 13:33:52 $</span>
00007 <span class="comment"> * $Revision: 1.17 $</span>
00008 <span class="comment"> */</span>
00009 
00010 <span class="preprocessor">#ifndef XFUCONFIGURATIONDATA_H_INCLUDED</span>
00011 <span class="preprocessor"></span><span class="preprocessor">#define XFUCONFIGURATIONDATA_H_INCLUDED</span>
00012 <span class="preprocessor"></span>
00013 
00014 <span class="preprocessor">#include &lt;<a class="code" href="XFuConfiguration_8h.html">xfutil/XFuConfiguration.h</a>&gt;</span>
00015 
00016 <span class="keyword">class </span>XFcGLResourceSurface;
00017 <span class="keyword">class </span><a class="code" href="classXFuPrinter.html">XFuPrinter</a>;
00018 
00019 <span class="comment"></span>
00020 <span class="comment">//! Defines audio info flags for configuration data audio properties.</span>
00021 <span class="comment"></span><span class="comment">/*! Audio properties' audio info flags determine which optional fields</span>
00022 <span class="comment"> *  have been filled with data read from the configuration data file.</span>
00023 <span class="comment"> */</span>
<a name="l00024"></a><a class="code" href="XFuConfigurationData_8h.html#a8">00024</a> <span class="keyword">enum</span> <a class="code" href="XFuConfigurationData_8h.html#a8">XFUCONFIGURATIONDATA_AUDIO_INFO_FLAGS</a>
00025 {
00026     <a class="code" href="XFuConfigurationData_8h.html#a8a0">XFUCDAIF_NONE</a>           = 0x00,     <span class="comment">//!&lt; No optional fields present.</span>
00027 <span class="comment"></span>    <a class="code" href="XFuConfigurationData_8h.html#a8a1">XFUCDAIF_SAMPLING_RATE</a>  = 0x01,     <span class="comment">//!&lt; Sampling rate field.</span>
00028 <span class="comment"></span>    <a class="code" href="XFuConfigurationData_8h.html#a8a2">XFUCDAIF_VOLUME</a>         = 0x02,     <span class="comment">//!&lt; Volume field.</span>
00029 <span class="comment"></span>    <a class="code" href="XFuConfigurationData_8h.html#a8a3">XFUCDAIF_PANNING</a>        = 0x04,     <span class="comment">//!&lt; Panning field.</span>
00030 <span class="comment"></span>    <a class="code" href="XFuConfigurationData_8h.html#a8a4">XFUCDAIF_PRIORITY</a>       = 0x08,     <span class="comment">//!&lt; Priority field.</span>
00031 <span class="comment"></span>    <a class="code" href="XFuConfigurationData_8h.html#a8a5">XFUCDAIF_LOOPING</a>        = 0x10,     <span class="comment">//!&lt; Looping field.</span>
00032 <span class="comment"></span>    <a class="code" href="XFuConfigurationData_8h.html#a8a6">XFUCDAIF_LOOPSTART</a>      = 0x20,     <span class="comment">//!&lt; Loop start field.</span>
00033 <span class="comment"></span>    <a class="code" href="XFuConfigurationData_8h.html#a8a7">XFUCDAIF_LOOPEND</a>        = 0x40,     <span class="comment">//!&lt; Loop end field.</span>
00034 <span class="comment"></span>};
00035 
00036 <span class="comment"></span>
00037 <span class="comment">//! Sound sample configuration data type.</span>
00038 <span class="comment"></span><span class="comment">/*! \sa XFUCONFIGURATIONDATA_AUDIO_INFO_FLAGS</span>
00039 <span class="comment"> */</span>
<a name="l00040"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html">00040</a> <span class="keyword">class </span><a class="code" href="classXFuConfigurationDataSoundInfo.html">XFuConfigurationDataSoundInfo</a>
00041 {
00042 
00043 <span class="keyword">public</span>:
00044 
<a name="l00045"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m0">00045</a>     CHAR *<a class="code" href="classXFuConfigurationDataSoundInfo.html#m0">mFilename</a>;            <span class="comment">//!&lt; Filename of the sound sample.</span>
<a name="l00046"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m1">00046</a> <span class="comment"></span>    FLOAT32 <a class="code" href="classXFuConfigurationDataSoundInfo.html#m1">mSamplingRate</a>;      <span class="comment">//!&lt; Sampling rate.</span>
<a name="l00047"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m2">00047</a> <span class="comment"></span>    REAL <a class="code" href="classXFuConfigurationDataSoundInfo.html#m2">mVolume</a>;               <span class="comment">//!&lt; Volume (1.0=original volume).</span>
<a name="l00048"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m3">00048</a> <span class="comment"></span>    REAL <a class="code" href="classXFuConfigurationDataSoundInfo.html#m3">mPanning</a>;              <span class="comment">//!&lt; Panning [0..1].</span>
<a name="l00049"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m4">00049</a> <span class="comment"></span>    UINT16 <a class="code" href="classXFuConfigurationDataSoundInfo.html#m4">mPriority</a>;           <span class="comment">//!&lt; Priority.</span>
<a name="l00050"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m5">00050</a> <span class="comment"></span>    INT <a class="code" href="classXFuConfigurationDataSoundInfo.html#m5">mLooping</a>;               <span class="comment">//!&lt; Non-zero if the sample is looping.</span>
<a name="l00051"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m6">00051</a> <span class="comment"></span>    INT32 <a class="code" href="classXFuConfigurationDataSoundInfo.html#m6">mLoopStart</a>;           <span class="comment">//!&lt; Loop start point.</span>
<a name="l00052"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m7">00052</a> <span class="comment"></span>    INT32 <a class="code" href="classXFuConfigurationDataSoundInfo.html#m7">mLoopEnd</a>;             <span class="comment">//!&lt; Loop end point.</span>
<a name="l00053"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">00053</a> <span class="comment"></span>    UINT32 <a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">mFlags</a>;              <span class="comment">//!&lt; Flags, see XFUCONFIGURATIONDATA_AUDIO_INFO_FLAGS.</span>
00054 <span class="comment"></span>
<a name="l00055"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#a0">00055</a>     <a class="code" href="classXFuConfigurationDataSoundInfo.html#a0">XFuConfigurationDataSoundInfo</a>() :
00056         mFilename(NULL), mSamplingRate(0.0f), mVolume(REALi(0)), mPanning(REALi(0)),
00057         mPriority(0), mLooping(0), mLoopStart(0), mLoopEnd(0), mFlags(0) {}
00058 
<a name="l00059"></a><a class="code" href="classXFuConfigurationDataSoundInfo.html#a1">00059</a>     <span class="keyword">virtual</span> <a class="code" href="classXFuConfigurationDataSoundInfo.html#a1">~XFuConfigurationDataSoundInfo</a>()
00060     {
00061         <span class="keyword">delete</span>[] mFilename;
00062         mFilename = NULL;
00063     }
00064 
00065 };
00066 
00067 <span class="comment"></span>
00068 <span class="comment">//! Music configuration data type.</span>
00069 <span class="comment"></span><span class="comment">/*! \sa XFUCONFIGURATIONDATA_AUDIO_INFO_FLAGS</span>
00070 <span class="comment"> */</span>
<a name="l00071"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html">00071</a> <span class="keyword">class </span><a class="code" href="classXFuConfigurationDataMusicInfo.html">XFuConfigurationDataMusicInfo</a>
00072 {
00073 
00074 <span class="keyword">public</span>:
00075 
<a name="l00076"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#m0">00076</a>     CHAR *<a class="code" href="classXFuConfigurationDataMusicInfo.html#m0">mFilename</a>;            <span class="comment">//!&lt; Filename of the sound sample.</span>
<a name="l00077"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#m1">00077</a> <span class="comment"></span>    FLOAT32 <a class="code" href="classXFuConfigurationDataMusicInfo.html#m1">mSamplingRate</a>;      <span class="comment">//!&lt; Sampling rate.</span>
<a name="l00078"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#m2">00078</a> <span class="comment"></span>    INT <a class="code" href="classXFuConfigurationDataMusicInfo.html#m2">m16Bit</a>;                 <span class="comment">//!&lt; Non-zero if 16 bit mixing requested, otherwise 8 bit.</span>
<a name="l00079"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#m3">00079</a> <span class="comment"></span>    INT <a class="code" href="classXFuConfigurationDataMusicInfo.html#m3">mStereo</a>;                <span class="comment">//!&lt; Non-zero if stereo requested, otherwise mono.</span>
<a name="l00080"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#m4">00080</a> <span class="comment"></span>    REAL <a class="code" href="classXFuConfigurationDataMusicInfo.html#m4">mVolume</a>;               <span class="comment">//!&lt; Volume (1.0=original volume).</span>
<a name="l00081"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#m5">00081</a> <span class="comment"></span>    UINT16 <a class="code" href="classXFuConfigurationDataMusicInfo.html#m5">mPriority</a>;           <span class="comment">//!&lt; Priority.</span>
<a name="l00082"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#m6">00082</a> <span class="comment"></span>    UINT32 <a class="code" href="classXFuConfigurationDataMusicInfo.html#m6">mFlags</a>;              <span class="comment">//!&lt; Flags, see XFUCONFIGURATIONDATA_AUDIO_INFO_FLAGS.</span>
00083 <span class="comment"></span>
<a name="l00084"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#a0">00084</a>     <a class="code" href="classXFuConfigurationDataMusicInfo.html#a0">XFuConfigurationDataMusicInfo</a>() :
00085         mFilename(NULL), mSamplingRate(0.0f), m16Bit(0), mStereo(0),
00086         mVolume(REALi(0)), mPriority(0), mFlags(0) {}
00087 
<a name="l00088"></a><a class="code" href="classXFuConfigurationDataMusicInfo.html#a1">00088</a>     <span class="keyword">virtual</span> <a class="code" href="classXFuConfigurationDataMusicInfo.html#a1">~XFuConfigurationDataMusicInfo</a>()
00089     {
00090         <span class="keyword">delete</span>[] mFilename;
00091         mFilename = NULL;
00092     }
00093 
00094 };
00095 
00096 <span class="comment"></span>
00097 <span class="comment">//! Configured data container.</span>
00098 <span class="comment"></span><span class="comment">/*!</span>
00099 <span class="comment"> * Reads and parses a set of configuration data keys from a file.</span>
00100 <span class="comment"> * The format of the configuration file is such that there is one property</span>
00101 <span class="comment"> * on each row in a text file. Each property is a pair of a key and a value,</span>
00102 <span class="comment"> * delimited by a '=' char, for example:</span>
00103 <span class="comment"> * \code fileName = HelloWorld.xff \endcode</span>
00104 <span class="comment"> *</span>
00105 <span class="comment"> * Optionally the key can also have a type prefix which is delimited from the</span>
00106 <span class="comment"> * rest of the key with a ':' (colon) char, for example:</span>
00107 <span class="comment"> * \code image : cursor = arrow.tga \endcode</span>
00108 <span class="comment"> * Recognized builtin types are parsed when the configuration file is processed.</span>
00109 <span class="comment"> * For some types the data is also loaded at the same time. Note that for</span>
00110 <span class="comment"> * recognized types the key is reformatted to use the short form before adding</span>
00111 <span class="comment"> * to the data container, which affects only fetching of data with regular</span>
00112 <span class="comment"> * get-method instead of a type specific getType-style method. If multiple keys</span>
00113 <span class="comment"> * refer to exact same value which results in loading of a resource, the</span>
00114 <span class="comment"> * resource is loaded only once so that the same loaded resource is shared</span>
00115 <span class="comment"> * between the keys.</span>
00116 <span class="comment"> *</span>
00117 <span class="comment"> * Builtin types have getType-style methods which can be used to read the</span>
00118 <span class="comment"> * data easily by the key omitting the type prefix. Builtin types also have</span>
00119 <span class="comment"> * both long and short forms of the type, so the previous example could be</span>
00120 <span class="comment"> * also written:</span>
00121 <span class="comment"> * \code i:cursor = arrow.tga \endcode</span>
00122 <span class="comment"> *</span>
00123 <span class="comment"> * Leading and trailing spaces are trimmed. Lines starting with character '#'</span>
00124 <span class="comment"> * are treated as comment lines and are ignored. Optional parts of</span>
00125 <span class="comment"> * value strings can be omitted.</span>
00126 <span class="comment"> *</span>
00127 <span class="comment"> * Recognized builtin types:</span>
00128 <span class="comment"> * &lt;table&gt;&lt;tr&gt;</span>
00129 <span class="comment"> * &lt;th&gt;Long Type&lt;th&gt;Short&lt;br&gt;Type&lt;th&gt;Value String Format and Description</span>
00130 <span class="comment"> *</span>
00131 <span class="comment"> * &lt;tr&gt;&lt;td&gt;\c image &lt;td&gt;\c i</span>
00132 <span class="comment"> *   &lt;td&gt;Value string: &lt;tt&gt;filename,type&lt;/tt&gt;</span>
00133 <span class="comment"> *   \li filename - filename of image which is loaded as a XFcGLResourceSurface</span>
00134 <span class="comment"> *                  when the configuration file is processed.</span>
00135 <span class="comment"> *   \li type - optional image format as a number (see XFCGFXFORMAT).</span>
00136 <span class="comment"> *</span>
00137 <span class="comment"> *   Example:</span>
00138 <span class="comment"> *   \code</span>
00139 <span class="comment"> *   image:menu.cursor = arrow.tga</span>
00140 <span class="comment"> *   i:splash = splash.tga \endcode</span>
00141 <span class="comment"> *</span>
00142 <span class="comment"> * &lt;tr&gt;&lt;td&gt;\c printer &lt;td&gt;\c p</span>
00143 <span class="comment"> *   &lt;td&gt;Value string: &lt;tt&gt;filename,spacing,type,colorkey&lt;/tt&gt;</span>
00144 <span class="comment"> *   \li filename - filename where to load the printer font image from.</span>
00145 <span class="comment"> *   \li spacing - default spacing for the printer.</span>
00146 <span class="comment"> *   \li type - 0:standard printer (XFuPrinter), 1:RLE sprite printer (XFuRLESpritePrinter).</span>
00147 <span class="comment"> *   \li colorkey - optional color key, hex strings can be used with 0x or # prefix.</span>
00148 <span class="comment"> *</span>
00149 <span class="comment"> *   Example:</span>
00150 <span class="comment"> *   \code</span>
00151 <span class="comment"> *   printer:menu.printer = smallfont.tga,0,1,#0000ff</span>
00152 <span class="comment"> *   p:digitprinter = digits.tga,2,0 \endcode</span>
00153 <span class="comment"> *</span>
00154 <span class="comment"> * &lt;tr&gt;&lt;td&gt;\c sound &lt;td&gt;\c s</span>
00155 <span class="comment"> *   &lt;td&gt;Value string: &lt;tt&gt;filename,samplingrate,volume,panning,priority,looping,loopstart,loopend&lt;/tt&gt;</span>
00156 <span class="comment"> *   \li filename - filename of a sound sample.</span>
00157 <span class="comment"> *   \li samplingrate - optional sampling rate as a real number (-1 = default).</span>
00158 <span class="comment"> *   \li volume - optional volume as a real number (1.0 = original volume, -1 = default).</span>
00159 <span class="comment"> *   \li panning - optional panning as a real number [0..1] (-1 = default).</span>
00160 <span class="comment"> *   \li priority - optional priority as an integer [0..65535] (-1 = default).</span>
00161 <span class="comment"> *   \li looping - optional looping flag, 0:no looping, 1:looping.</span>
00162 <span class="comment"> *   \li loopstart - optional loop start point as an integer.</span>
00163 <span class="comment"> *   \li loopend - optional loop end point as an integer.</span>
00164 <span class="comment"> *</span>
00165 <span class="comment"> *   Example:</span>
00166 <span class="comment"> *   \code</span>
00167 <span class="comment"> *   sound:menu.select = menuselect.wav</span>
00168 <span class="comment"> *   s:menu.move = menumove.wav,-1,0.5 \endcode</span>
00169 <span class="comment"> *</span>
00170 <span class="comment"> * &lt;tr&gt;&lt;td&gt;\c music &lt;td&gt;\c m</span>
00171 <span class="comment"> *   &lt;td&gt;Value string: &lt;tt&gt;filename,samplingrate,chanmode,bitmode,volume,priority&lt;/tt&gt;</span>
00172 <span class="comment"> *   \li filename - filename of the music data.</span>
00173 <span class="comment"> *   \li samplingrate - sampling rate for mixing the music as a real number.</span>
00174 <span class="comment"> *   \li chanmode - channel mode, 0:mono, 1:stereo.</span>
00175 <span class="comment"> *   \li bitmode - bits to use, 0:8 bits, 1:16 bits.</span>
00176 <span class="comment"> *   \li volume - optional volume as a real number (1.0 = original volume, -1 = default).</span>
00177 <span class="comment"> *   \li priority - optional priority as an integer [0..65535].</span>
00178 <span class="comment"> *</span>
00179 <span class="comment"> *   Example:</span>
00180 <span class="comment"> *   \code</span>
00181 <span class="comment"> *   music:menumusic = menu.xm,16000,0,0,0.3,0</span>
00182 <span class="comment"> *   music:gamemusic = game.xm,8000,0,0,0.15,0 \endcode</span>
00183 <span class="comment"> *</span>
00184 <span class="comment"> * &lt;/table&gt;</span>
00185 <span class="comment"> *</span>
00186 <span class="comment"> * \note XFuConfigurationData object owns all objects it has loaded, so you shouldn't</span>
00187 <span class="comment"> *       delete manually any objects you access via this class.</span>
00188 <span class="comment"> * \todo Type handler registration interface.</span>
00189 <span class="comment"> *</span>
00190 <span class="comment"> * \sa getImage</span>
00191 <span class="comment"> * \sa XFcGLResourceSurface</span>
00192 <span class="comment"> * \sa getPrinter</span>
00193 <span class="comment"> * \sa XFuPrinter</span>
00194 <span class="comment"> * \sa XFuRLESpritePrinter</span>
00195 <span class="comment"> * \sa getRectangle</span>
00196 <span class="comment"> * \sa XFcRectangle</span>
00197 <span class="comment"> * \sa getSound</span>
00198 <span class="comment"> * \sa XFuConfigurationDataSoundInfo</span>
00199 <span class="comment"> * \sa getMusic</span>
00200 <span class="comment"> * \sa XFuConfigurationDataMusicInfo</span>
00201 <span class="comment"> * \sa XFuConfiguration</span>
00202 <span class="comment"> * \sa XFcAudio</span>
00203 <span class="comment"> */</span>
<a name="l00204"></a><a class="code" href="classXFuConfigurationData.html">00204</a> <span class="keyword">class </span><a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> : <span class="keyword">public</span> <a class="code" href="classXFuConfiguration.html">XFuConfiguration</a>
00205 {
00206 
00207 <span class="keyword">public</span>:
00208 <span class="comment"></span>
00209 <span class="comment">    //! Static constructor.</span>
00210 <span class="comment"></span><span class="comment">    /*! \return new configuration data object if successful, or NULL if unsuccessful.</span>
00211 <span class="comment">     */</span>
00212     <span class="keyword">static</span> <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> * <a class="code" href="classXFuConfigurationData.html#d0">create</a>();
00213 <span class="comment"></span>
00214 <span class="comment">    //! Static constructor.</span>
00215 <span class="comment"></span><span class="comment">    /*! \param aFilename filename of configuration data to load.</span>
00216 <span class="comment">     * \return new configuration data object if successful, or NULL if unsuccessful.</span>
00217 <span class="comment">     */</span>
00218     <span class="keyword">static</span> <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> * <a class="code" href="classXFuConfigurationData.html#d0">create</a>(<span class="keyword">const</span> CHAR *aFilename);
00219 <span class="comment"></span>
00220 <span class="comment">    //! Static constructor.</span>
00221 <span class="comment"></span><span class="comment">    /*! \param aFile open file pointing to configuration data to load.</span>
00222 <span class="comment">     * \return new configuration data object if successful, or NULL if unsuccessful.</span>
00223 <span class="comment">     * \note Configuration data is assumed to continue to end of the file.</span>
00224 <span class="comment">     */</span>
00225     <span class="keyword">static</span> <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> * <a class="code" href="classXFuConfigurationData.html#d0">create</a>(XFcFile *aFile);
00226     <span class="comment"></span>
00227 <span class="comment">    //! Virtual destructor.</span>
00228 <span class="comment"></span>    <span class="keyword">virtual</span> <a class="code" href="classXFuConfigurationData.html#a0">~XFuConfigurationData</a>();
00229 <span class="comment"></span>
00230 <span class="comment">    //! Returns the value of a property as a string, or NULL if not found.</span>
00231 <span class="comment"></span><span class="comment">    /*! \param aKey key of the property to return.</span>
00232 <span class="comment">     */</span>
00233     <span class="keyword">virtual</span> CHAR * <a class="code" href="classXFuConfigurationData.html#a1">get</a>(<span class="keyword">const</span> CHAR *aKey);
00234 <span class="comment"></span>
00235 <span class="comment">    //! Returns a configuration data image by key, or NULL if not found.</span>
00236 <span class="comment"></span><span class="comment">    /*! \param aKey key of the image omitting the type prefix and delimiter.</span>
00237 <span class="comment">     * \return pointer to the image surface, or NULL if not found.</span>
00238 <span class="comment">     */</span>
00239     <span class="keyword">virtual</span> XFcGLResourceSurface * <a class="code" href="classXFuConfigurationData.html#a2">getImage</a>(<span class="keyword">const</span> CHAR *aKey);
00240 <span class="comment"></span>
00241 <span class="comment">    //! Returns a configuration data printer by key, or NULL if not found.</span>
00242 <span class="comment"></span><span class="comment">    /*! \param aKey key of the printer omitting the type prefix and delimiter.</span>
00243 <span class="comment">     * \return pointer to the printer, or NULL if not found.</span>
00244 <span class="comment">     */</span>
00245     <span class="keyword">virtual</span> <a class="code" href="classXFuPrinter.html">XFuPrinter</a> * <a class="code" href="classXFuConfigurationData.html#a3">getPrinter</a>(<span class="keyword">const</span> CHAR *aKey);
00246 <span class="comment"></span>
00247 <span class="comment">    //! Returns a configuration data sound info by key, or NULL if not found.</span>
00248 <span class="comment"></span><span class="comment">    /*! \param aKey key of the sound omitting the type prefix and delimiter.</span>
00249 <span class="comment">     * \return pointer to sound info, or NULL if not found.</span>
00250 <span class="comment">     */</span>
00251     <span class="keyword">virtual</span> <a class="code" href="classXFuConfigurationDataSoundInfo.html">XFuConfigurationDataSoundInfo</a> * <a class="code" href="classXFuConfigurationData.html#a4">getSound</a>(<span class="keyword">const</span> CHAR *aKey);
00252 <span class="comment"></span>
00253 <span class="comment">    //! Returns a configuration data music info by key, or NULL if not found.</span>
00254 <span class="comment"></span><span class="comment">    /*! \param aKey key of the music omitting the type prefix and delimiter.</span>
00255 <span class="comment">     * \return pointer to music info, or NULL if not found.</span>
00256 <span class="comment">     */</span>
00257     <span class="keyword">virtual</span> <a class="code" href="classXFuConfigurationDataMusicInfo.html">XFuConfigurationDataMusicInfo</a> * <a class="code" href="classXFuConfigurationData.html#a5">getMusic</a>(<span class="keyword">const</span> CHAR *aKey);
00258 <span class="comment"></span>
00259 <span class="comment">    //! Gets a property value by key, and then parses and returns the value as a rectangle.</span>
00260 <span class="comment"></span><span class="comment">    /*!</span>
00261 <span class="comment">     * Rectangle value string format: &lt;tt&gt;x,y,width,height&lt;/tt&gt;.</span>
00262 <span class="comment">     *   \li x - X-component of the rectangle as an integer.</span>
00263 <span class="comment">     *   \li y - optional Y-component of the rectangle as an integer.</span>
00264 <span class="comment">     *   \li width - optional width of the rectangle as an integer.</span>
00265 <span class="comment">     *   \li height - optional height of the rectangle as an integer.</span>
00266 <span class="comment">     *</span>
00267 <span class="comment">     *   Example:</span>
00268 <span class="comment">     *   \code</span>
00269 <span class="comment">     *   rectangle:laptime.position = 10,10</span>
00270 <span class="comment">     *   r:viewport = 4,4,160,120 \endcode</span>
00271 <span class="comment">     *</span>
00272 <span class="comment">     * \param aDest returned rectangle, if successful.</span>
00273 <span class="comment">     * \param aKey key of the property value to be parsed.</span>
00274 <span class="comment">     * \return 1 if successful (rectangle was found), or 0 if unsuccessful.</span>
00275 <span class="comment">     */</span>
00276     <span class="keyword">virtual</span> INT <a class="code" href="classXFuConfigurationData.html#a6">getRectangle</a>(XFcRectangle &amp;aDest, <span class="keyword">const</span> CHAR *aKey);
00277 <span class="comment"></span>
00278 <span class="comment">    //! Sets the value of a property.</span>
00279 <span class="comment"></span><span class="comment">    /*! If the key contains a type prefix delimited by ':' character from the</span>
00280 <span class="comment">     *  rest of the key, and the type is a recognized builtin type, the value</span>
00281 <span class="comment">     *  is parsed and possibly loaded according to the type. Properties with</span>
00282 <span class="comment">     *  recognized builtin types can be accessed with type specific</span>
00283 <span class="comment">     *  getType-style method. If the possible type prefix is unrecognized then</span>
00284 <span class="comment">     *  the value must be accessed with get-method.</span>
00285 <span class="comment">     * \param aKey full key of the property to set value for.</span>
00286 <span class="comment">     * \param aValue value of the property.</span>
00287 <span class="comment">     */</span>
00288     <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#a7">put</a>(<span class="keyword">const</span> CHAR *aKey, <span class="keyword">const</span> CHAR *aValue);
00289 <span class="comment"></span>
00290 <span class="comment">    //! Loads new configuration file and merges its data to the current set.</span>
00291 <span class="comment"></span><span class="comment">    /*! \param aFilename filename of the configuration data file to load.</span>
00292 <span class="comment">     * \return 1 if successful, 0 if unsuccessful (e.g. file not found).</span>
00293 <span class="comment">     */</span>
00294     <span class="keyword">virtual</span> INT <a class="code" href="classXFuConfigurationData.html#a8">load</a>(<span class="keyword">const</span> CHAR *aFilename);
00295 <span class="comment"></span>
00296 <span class="comment">    //! Loads new configuration file and merges its data to the current set.</span>
00297 <span class="comment"></span><span class="comment">    /*! \param aFile open file pointing to the configuration data to load.</span>
00298 <span class="comment">     * \return 1 if successful, 0 if unsuccessful (e.g. file not found).</span>
00299 <span class="comment">     * \note Configuration data is assumed to continue to end of the file.</span>
00300 <span class="comment">     */</span>
00301     <span class="keyword">virtual</span> INT <a class="code" href="classXFuConfigurationData.html#a8">load</a>(XFcFile *aFile);
00302     <span class="comment"></span>
00303 <span class="comment">    //! Parses a rectangle value string.</span>
00304 <span class="comment"></span><span class="comment">    /*! \return rectangle filled with available values, or an empty rectangle (0,0,0,0) if unsuccessful.</span>
00305 <span class="comment">     */</span>
00306     <span class="keyword">static</span> XFcRectangle <a class="code" href="classXFuConfigurationData.html#d3">parseRectangleString</a>(<span class="keyword">const</span> CHAR *aValue);
00307 <span class="comment"></span>
00308 <span class="comment">    //! Sets deferred loading mode status.</span>
00309 <span class="comment"></span><span class="comment">    /*! When deferred loading mode is enabled, all recognized object types held</span>
00310 <span class="comment">     *  by this configuration data container are loaded only when an object is</span>
00311 <span class="comment">     *  requested for the first time. By default deferred loading is disabled</span>
00312 <span class="comment">     *  and all recognized types are loaded on load of a configuration file.</span>
00313 <span class="comment">     *  Deferred loading must be enabled before calling load.</span>
00314 <span class="comment">     */</span>
00315     <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#a10">setDeferredLoadingEnabled</a>(INT aEnabled);
00316 
00317 <span class="keyword">protected</span>:
00318 <span class="comment"></span>
00319 <span class="comment">    //! Internal image container type.</span>
00320 <span class="comment"></span><span class="comment">    /*! \internal */</span>
<a name="l00321"></a><a class="code" href="classXFuConfigurationData.html#t0">00321</a>     <span class="keyword">typedef</span> XFcHashtable&lt;XFuStringKey, XFcGLResourceSurface *&gt; <a class="code" href="classXFuConfigurationData.html#t0">ImageSet</a>;<span class="comment"></span>
00322 <span class="comment">    //! Internal printer container type.</span>
00323 <span class="comment"></span><span class="comment">    /*! \internal */</span>
<a name="l00324"></a><a class="code" href="classXFuConfigurationData.html#t1">00324</a>     <span class="keyword">typedef</span> XFcHashtable&lt;XFuStringKey, XFuPrinter *&gt; <a class="code" href="classXFuConfigurationData.html#t1">PrinterSet</a>;<span class="comment"></span>
00325 <span class="comment">    //! Internal sound info container type.</span>
00326 <span class="comment"></span><span class="comment">    /*! \internal */</span>
<a name="l00327"></a><a class="code" href="classXFuConfigurationData.html#t2">00327</a>     <span class="keyword">typedef</span> XFcHashtable&lt;XFuStringKey, XFuConfigurationDataSoundInfo *&gt; <a class="code" href="classXFuConfigurationData.html#t2">SoundSet</a>;<span class="comment"></span>
00328 <span class="comment">    //! Internal music info container type.</span>
00329 <span class="comment"></span><span class="comment">    /*! \internal */</span>
<a name="l00330"></a><a class="code" href="classXFuConfigurationData.html#t3">00330</a>     <span class="keyword">typedef</span> XFcHashtable&lt;XFuStringKey, XFuConfigurationDataMusicInfo *&gt; <a class="code" href="classXFuConfigurationData.html#t3">MusicSet</a>;
00331 <span class="comment"></span>
00332 <span class="comment">    //! Protected constructor.</span>
00333 <span class="comment"></span>    <a class="code" href="classXFuConfigurationData.html#b0">XFuConfigurationData</a>();
00334 <span class="comment"></span>
00335 <span class="comment">    //! Initializes a newly constructed object.</span>
00336 <span class="comment"></span><span class="comment">    /*! \return 1 if successful, 0 if unsuccessful.</span>
00337 <span class="comment">     */</span>
00338     INT <a class="code" href="classXFuConfigurationData.html#b1">init</a>();
00339 <span class="comment"></span>
00340 <span class="comment">    //! Adds and possibly loads a new image to the internal image container.</span>
00341 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b2">addImage</a>(<span class="keyword">const</span> CHAR *aValue);<span class="comment"></span>
00342 <span class="comment">    //! Adds and possibly loads a new printer to the internal printer container.</span>
00343 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b3">addPrinter</a>(<span class="keyword">const</span> CHAR *aValue);<span class="comment"></span>
00344 <span class="comment">    //! Adds a new sound to the internal sound container.</span>
00345 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b4">addSound</a>(<span class="keyword">const</span> CHAR *aValue);<span class="comment"></span>
00346 <span class="comment">    //! Adds a new music to the internal music container.</span>
00347 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b5">addMusic</a>(<span class="keyword">const</span> CHAR *aValue);
00348 <span class="comment"></span>
00349 <span class="comment">    //! Loads a new image to the internal image container.</span>
00350 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b6">loadImage</a>(ImageSet::iterator &amp;aIterator);<span class="comment"></span>
00351 <span class="comment">    //! Loads a new printer to the internal printer container.</span>
00352 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b7">loadPrinter</a>(PrinterSet::iterator &amp;aIterator);
00353 <span class="comment"></span>
00354 <span class="comment">    //! Allocates and returns a new key with a specified prefix char.</span>
00355 <span class="comment"></span>    CHAR * <a class="code" href="classXFuConfigurationData.html#b8">makePrefixedKey</a>(<span class="keyword">const</span> CHAR aPrefix, <span class="keyword">const</span> CHAR *aKey);
00356 <span class="comment"></span>
00357 <span class="comment">    //! Non-zero if deferred loading is enabled.</span>
<a name="l00358"></a><a class="code" href="classXFuConfigurationData.html#n0">00358</a> <span class="comment"></span>    INT <a class="code" href="classXFuConfigurationData.html#n0">mDeferredLoadingEnabled</a>;
00359 
<a name="l00360"></a><a class="code" href="classXFuConfigurationData.html#n1">00360</a>     ImageSet *<a class="code" href="classXFuConfigurationData.html#n1">mImages</a>;          <span class="comment">//!&lt; Internal image container.</span>
<a name="l00361"></a><a class="code" href="classXFuConfigurationData.html#n2">00361</a> <span class="comment"></span>    PrinterSet *<a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>;      <span class="comment">//!&lt; Internal printer container.</span>
<a name="l00362"></a><a class="code" href="classXFuConfigurationData.html#n3">00362</a> <span class="comment"></span>    SoundSet *<a class="code" href="classXFuConfigurationData.html#n3">mSounds</a>;          <span class="comment">//!&lt; Internal sound container.</span>
<a name="l00363"></a><a class="code" href="classXFuConfigurationData.html#n4">00363</a> <span class="comment"></span>    MusicSet *<a class="code" href="classXFuConfigurationData.html#n4">mMusics</a>;          <span class="comment">//!&lt; Internal music container.</span>
00364 <span class="comment"></span>
00365 };
00366 
00367 
00368 <span class="preprocessor">#endif // !XFUCONFIGURATIONDATA_H_INCLUDED</span>
00369 <span class="preprocessor"></span>
</pre></div><br clear=all>
<center><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=5><img src="paleblue.gif" width=600 height=1></td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;</td><td><a href="http://www.fathammer.com/"><img src="logo.gif" border=0></a></td>
<td valign=bottom><center><font face="arial, helvetica" size="-2" color="#003366">X-Forge Documentation<br>Confidential<br>Copyright &copy; 2002-2003 Fathammer</font></center></td><td>&nbsp;&nbsp;&nbsp;</td>
<td valign=bottom><center><font face="arial, helvetica" size="-2" color="#003366">Documentation generated<br>with <a href="http://www.doxygen.org/index.html">doxygen</a><br>by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a></font></center></td></tr></table>
</body></html>
