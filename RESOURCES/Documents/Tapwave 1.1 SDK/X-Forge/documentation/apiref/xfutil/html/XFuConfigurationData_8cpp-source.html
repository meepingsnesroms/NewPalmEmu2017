<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>XFuConfigurationData.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>XFuConfigurationData.cpp</h1><a href="XFuConfigurationData_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*! \file</span>
00002 <span class="comment"> * X-Forge Util &lt;br&gt;</span>
00003 <span class="comment"> * Copyright 2000-2003 Fathammer Ltd</span>
00004 <span class="comment"> *</span>
00005 <span class="comment"> * $Id: XFuConfigurationData.cpp,v 1.12 2003/08/12 13:34:08 lars Exp $</span>
00006 <span class="comment"> * $Date: 2003/08/12 13:34:08 $</span>
00007 <span class="comment"> * $Revision: 1.12 $</span>
00008 <span class="comment"> */</span>
00009 
00010 <span class="preprocessor">#include &lt;xforge.h&gt;</span>
00011 <span class="preprocessor">#include &lt;<a class="code" href="XFuPrinter_8h.html">xfutil/XFuPrinter.h</a>&gt;</span>
00012 <span class="preprocessor">#include &lt;<a class="code" href="XFuRLESpritePrinter_8h.html">xfutil/XFuRLESpritePrinter.h</a>&gt;</span>
00013 <span class="preprocessor">#include &lt;<a class="code" href="XFuTokenizer_8h.html">xfutil/XFuTokenizer.h</a>&gt;</span>
00014 <span class="preprocessor">#include &lt;<a class="code" href="XFuConfigurationData_8h.html">xfutil/XFuConfigurationData.h</a>&gt;</span>
00015 
00016 
<a name="l00017"></a><a class="code" href="XFuConfigurationData_8cpp.html#a0">00017</a> <span class="preprocessor">#define XFUCD_TYPE_DELIMITER_CHAR       (CHAR)':'</span>
<a name="l00018"></a><a class="code" href="XFuConfigurationData_8cpp.html#a1">00018</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_DELIMITER_STR        XFCSTR(":")</span>
<a name="l00019"></a><a class="code" href="XFuConfigurationData_8cpp.html#a2">00019</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_IMAGE_SHORT_CHAR     (CHAR)'i'</span>
<a name="l00020"></a><a class="code" href="XFuConfigurationData_8cpp.html#a3">00020</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_IMAGE_SHORT_STR      XFCSTR("i")</span>
<a name="l00021"></a><a class="code" href="XFuConfigurationData_8cpp.html#a4">00021</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_IMAGE_LONG           XFCSTR("image")</span>
<a name="l00022"></a><a class="code" href="XFuConfigurationData_8cpp.html#a5">00022</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_PRINTER_SHORT_CHAR   (CHAR)'p'</span>
<a name="l00023"></a><a class="code" href="XFuConfigurationData_8cpp.html#a6">00023</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_PRINTER_SHORT_STR    XFCSTR("p")</span>
<a name="l00024"></a><a class="code" href="XFuConfigurationData_8cpp.html#a7">00024</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_PRINTER_LONG         XFCSTR("printer")</span>
<a name="l00025"></a><a class="code" href="XFuConfigurationData_8cpp.html#a8">00025</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_SOUND_SHORT_CHAR     (CHAR)'s'</span>
<a name="l00026"></a><a class="code" href="XFuConfigurationData_8cpp.html#a9">00026</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_SOUND_SHORT_STR      XFCSTR("s")</span>
<a name="l00027"></a><a class="code" href="XFuConfigurationData_8cpp.html#a10">00027</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_SOUND_LONG           XFCSTR("sound")</span>
<a name="l00028"></a><a class="code" href="XFuConfigurationData_8cpp.html#a11">00028</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_MUSIC_SHORT_CHAR     (CHAR)'m'</span>
<a name="l00029"></a><a class="code" href="XFuConfigurationData_8cpp.html#a12">00029</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_MUSIC_SHORT_STR      XFCSTR("m")</span>
<a name="l00030"></a><a class="code" href="XFuConfigurationData_8cpp.html#a13">00030</a> <span class="preprocessor"></span><span class="preprocessor">#define XFUCD_TYPE_MUSIC_LONG           XFCSTR("music")</span>
00031 <span class="preprocessor"></span>
00032 
<a name="l00033"></a><a class="code" href="classXFuConfigurationData.html#b0">00033</a> <a class="code" href="classXFuConfigurationData.html#b0">XFuConfigurationData::XFuConfigurationData</a>() :
00034     mImages(NULL), mPrinters(NULL), mSounds(NULL), mMusics(NULL)
00035 {
00036 }
00037 
00038 
<a name="l00039"></a><a class="code" href="classXFuConfigurationData.html#d0">00039</a> <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> * <a class="code" href="classXFuConfigurationData.html#d0">XFuConfigurationData::create</a>()
00040 {
00041     <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> *res = <span class="keyword">new</span> <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a>;
00042     <span class="keywordflow">if</span> (res != NULL &amp;&amp; !res-&gt;<a class="code" href="classXFuConfigurationData.html#b1">init</a>())
00043     {
00044         <span class="keyword">delete</span> res;
00045         <span class="keywordflow">return</span> NULL;
00046     }
00047     <span class="keywordflow">return</span> res;
00048 }
00049 
00050 
<a name="l00051"></a><a class="code" href="classXFuConfigurationData.html#d1">00051</a> <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> * <a class="code" href="classXFuConfigurationData.html#d0">XFuConfigurationData::create</a>(<span class="keyword">const</span> CHAR *aFilename)
00052 {
00053     <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> *res = <a class="code" href="classXFuConfigurationData.html#d0">create</a>();
00054     <span class="keywordflow">if</span> (res != NULL)
00055     {
00056         <span class="keywordflow">if</span> (!res-&gt;<a class="code" href="classXFuConfigurationData.html#a8">load</a>(aFilename))
00057         {
00058             <span class="keyword">delete</span> res;
00059             <span class="keywordflow">return</span> NULL;
00060         }
00061     }
00062     <span class="keywordflow">return</span> res;
00063 }
00064 
00065 
<a name="l00066"></a><a class="code" href="classXFuConfigurationData.html#d2">00066</a> <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> * <a class="code" href="classXFuConfigurationData.html#d0">XFuConfigurationData::create</a>(XFcFile *aFile)
00067 {
00068     <a class="code" href="classXFuConfigurationData.html">XFuConfigurationData</a> *res = <a class="code" href="classXFuConfigurationData.html#d0">create</a>();
00069     <span class="keywordflow">if</span> (res != NULL)
00070     {
00071         <span class="keywordflow">if</span> (!res-&gt;<a class="code" href="classXFuConfigurationData.html#a8">load</a>(aFile))
00072         {
00073             <span class="keyword">delete</span> res;
00074             <span class="keywordflow">return</span> NULL;
00075         }
00076     }
00077     <span class="keywordflow">return</span> res;
00078 }
00079 
00080 
<a name="l00081"></a><a class="code" href="classXFuConfigurationData.html#b1">00081</a> INT <a class="code" href="classXFuConfigurationData.html#b1">XFuConfigurationData::init</a>()
00082 {
00083     <a class="code" href="classXFuConfigurationData.html#n1">mImages</a> = <span class="keyword">new</span> <a class="code" href="classXFuConfigurationData.html#t0">ImageSet</a>;
00084     <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a> = <span class="keyword">new</span> <a class="code" href="classXFuConfigurationData.html#t1">PrinterSet</a>;
00085     <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a> = <span class="keyword">new</span> <a class="code" href="classXFuConfigurationData.html#t2">SoundSet</a>;
00086     <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a> = <span class="keyword">new</span> <a class="code" href="classXFuConfigurationData.html#t3">MusicSet</a>;
00087     <span class="keywordflow">if</span> (<a class="code" href="classXFuConfigurationData.html#n1">mImages</a> == NULL ||
00088         <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a> == NULL ||
00089         <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a> == NULL ||
00090         <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a> == NULL)
00091     {
00092         <span class="keyword">delete</span> <a class="code" href="classXFuConfigurationData.html#n1">mImages</a>;
00093         <span class="keyword">delete</span> <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>;
00094         <span class="keyword">delete</span> <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a>;
00095         <span class="keyword">delete</span> <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a>;
00096         <span class="keywordflow">return</span> 0;
00097     }
00098     <span class="keywordflow">return</span> 1;
00099 }
00100 
00101 
<a name="l00102"></a><a class="code" href="classXFuConfigurationData.html#a0">00102</a> <a class="code" href="classXFuConfigurationData.html#a0">XFuConfigurationData::~XFuConfigurationData</a>()
00103 {
00104     <span class="comment">// delete all images</span>
00105     ImageSet::iterator imageIt = <a class="code" href="classXFuConfigurationData.html#n1">mImages</a>-&gt;begin();
00106     <span class="keywordflow">for</span> (; imageIt != <a class="code" href="classXFuConfigurationData.html#n1">mImages</a>-&gt;end(); ++imageIt)
00107         <span class="keyword">delete</span> imageIt.getValue();
00108     <span class="keyword">delete</span> <a class="code" href="classXFuConfigurationData.html#n1">mImages</a>;
00109     <a class="code" href="classXFuConfigurationData.html#n1">mImages</a> = NULL;
00110 
00111     <span class="comment">// delete all printers</span>
00112     PrinterSet::iterator printerIt = <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>-&gt;begin();
00113     <span class="keywordflow">for</span> (; printerIt != <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>-&gt;end(); ++printerIt)
00114         <span class="keyword">delete</span> printerIt.getValue();
00115     <span class="keyword">delete</span> <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>;
00116     <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a> = NULL;
00117 
00118     <span class="comment">// delete all sounds</span>
00119     SoundSet::iterator soundIt = <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a>-&gt;begin();
00120     <span class="keywordflow">for</span> (; soundIt != <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a>-&gt;end(); ++soundIt)
00121         <span class="keyword">delete</span> soundIt.getValue();
00122     <span class="keyword">delete</span> <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a>;
00123     <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a> = NULL;
00124 
00125     <span class="comment">// delete all music</span>
00126     MusicSet::iterator musicIt = <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a>-&gt;begin();
00127     <span class="keywordflow">for</span> (; musicIt != <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a>-&gt;end(); ++musicIt)
00128         <span class="keyword">delete</span> musicIt.getValue();
00129     <span class="keyword">delete</span> <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a>;
00130     <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a> = NULL;
00131 
00132     <span class="comment">// parent cleanup</span>
00133     <a class="code" href="classXFuConfiguration.html#a6">XFuConfiguration::clear</a>();
00134 }
00135 
00136 
<a name="l00137"></a><a class="code" href="classXFuConfigurationData.html#a1">00137</a> CHAR * <a class="code" href="classXFuConfigurationData.html#a1">XFuConfigurationData::get</a>(<span class="keyword">const</span> CHAR *aKey)
00138 {
00139     XFCASSERT(aKey != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::get"</span>);
00140     <span class="keywordflow">return</span> <a class="code" href="classXFuConfiguration.html#a2">XFuConfiguration::get</a>(aKey);
00141 }
00142 
00143 
<a name="l00144"></a><a class="code" href="classXFuConfigurationData.html#b8">00144</a> CHAR * <a class="code" href="classXFuConfigurationData.html#b8">XFuConfigurationData::makePrefixedKey</a>(<span class="keyword">const</span> CHAR aPrefix, <span class="keyword">const</span> CHAR *aKey)
00145 {
00146     CHAR *key = <span class="keyword">new</span> CHAR[XFcStringToolkit::getLength(aKey) + 3];
00147     XFcStringToolkit::format(key, <span class="stringliteral">"%c%c%s"</span>, aPrefix, XFUCD_TYPE_DELIMITER_CHAR, aKey);
00148     <span class="keywordflow">return</span> key;
00149 }
00150 
00151 
<a name="l00152"></a><a class="code" href="classXFuConfigurationData.html#a2">00152</a> XFcGLResourceSurface * <a class="code" href="classXFuConfigurationData.html#a2">XFuConfigurationData::getImage</a>(<span class="keyword">const</span> CHAR *aKey)
00153 {
00154     XFCASSERT(aKey != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::getImage"</span>);
00155     CHAR *key = <a class="code" href="classXFuConfigurationData.html#b8">makePrefixedKey</a>(XFUCD_TYPE_IMAGE_SHORT_CHAR, aKey);
00156     ImageSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n1">mImages</a>-&gt;find(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(<a class="code" href="classXFuConfigurationData.html#a1">get</a>(key)));
00157     <span class="keyword">delete</span>[] key;
00158     <span class="keywordflow">if</span> (it.isValid())
00159     {
00160         <span class="keywordflow">if</span> (it.getValue() == NULL)
00161             <a class="code" href="classXFuConfigurationData.html#b6">loadImage</a>(it);
00162         <span class="keywordflow">return</span> it.getValue();
00163     }
00164     <span class="keywordflow">else</span>
00165         <span class="keywordflow">return</span> NULL;
00166 }
00167 
00168 
<a name="l00169"></a><a class="code" href="classXFuConfigurationData.html#a3">00169</a> <a class="code" href="classXFuPrinter.html">XFuPrinter</a> * <a class="code" href="classXFuConfigurationData.html#a3">XFuConfigurationData::getPrinter</a>(<span class="keyword">const</span> CHAR *aKey)
00170 {
00171     XFCASSERT(aKey != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::getPrinter"</span>);
00172     CHAR *key = <a class="code" href="classXFuConfigurationData.html#b8">makePrefixedKey</a>(XFUCD_TYPE_PRINTER_SHORT_CHAR, aKey);
00173     PrinterSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>-&gt;find(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(<a class="code" href="classXFuConfigurationData.html#a1">get</a>(key)));
00174     <span class="keyword">delete</span>[] key;
00175     <span class="keywordflow">if</span> (it.isValid())
00176     {
00177         <span class="keywordflow">if</span> (it.getValue() == NULL)
00178             <a class="code" href="classXFuConfigurationData.html#b7">loadPrinter</a>(it);
00179         <span class="keywordflow">return</span> it.getValue();
00180     }
00181     <span class="keywordflow">else</span>
00182         <span class="keywordflow">return</span> NULL;
00183 }
00184 
00185 
<a name="l00186"></a><a class="code" href="classXFuConfigurationData.html#d3">00186</a> XFcRectangle <a class="code" href="classXFuConfigurationData.html#d3">XFuConfigurationData::parseRectangleString</a>(<span class="keyword">const</span> CHAR *aValue)
00187 {
00188     XFcRectangle rect(0, 0, 0, 0);
00189     <a class="code" href="classXFuTokenizer.html">XFuTokenizer</a> tok;
00190     INT32 tokens;
00191 
00192     <span class="keywordflow">if</span> (aValue != NULL)
00193     {
00194         tok.<a class="code" href="classXFuTokenizer.html#a2">tokenize</a>(aValue, XFCSTR(<span class="stringliteral">","</span>));
00195         tokens = tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>();
00196         XFCASSERT(tokens &gt;= 1 &amp;&amp; tokens &lt;= 4 &amp;&amp; <span class="stringliteral">"XFuConfigurationData::parseRectangleString: Invalid tokens."</span>);
00197         
00198         <span class="keywordflow">if</span> (tokens &gt;= 1) rect.mX = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(0));
00199         <span class="keywordflow">if</span> (tokens &gt;= 2) rect.mY = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(1));
00200         <span class="keywordflow">if</span> (tokens &gt;= 3) rect.mWidth = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(2));
00201         <span class="keywordflow">if</span> (tokens &gt;= 4) rect.mHeight = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(3));
00202     }
00203 
00204     <span class="keywordflow">return</span> rect;
00205 }
00206 
00207 
<a name="l00208"></a><a class="code" href="classXFuConfigurationData.html#a6">00208</a> INT <a class="code" href="classXFuConfigurationData.html#a6">XFuConfigurationData::getRectangle</a>(XFcRectangle &amp;aDest, <span class="keyword">const</span> CHAR *aKey)
00209 {
00210     XFCASSERT(aKey != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::getRectangle"</span>);
00211     <span class="keyword">const</span> CHAR *value = <a class="code" href="classXFuConfigurationData.html#a1">get</a>(aKey);
00212 
00213     <span class="keywordflow">if</span> (value != NULL)
00214     {
00215         aDest = <a class="code" href="classXFuConfigurationData.html#d3">parseRectangleString</a>(value);
00216         <span class="keywordflow">return</span> 1;
00217     }
00218     <span class="keywordflow">return</span> 0;
00219 }
00220 
00221 
<a name="l00222"></a><a class="code" href="classXFuConfigurationData.html#a4">00222</a> <a class="code" href="classXFuConfigurationDataSoundInfo.html">XFuConfigurationDataSoundInfo</a> * <a class="code" href="classXFuConfigurationData.html#a4">XFuConfigurationData::getSound</a>(<span class="keyword">const</span> CHAR *aKey)
00223 {
00224     XFCASSERT(aKey != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::getSound"</span>);
00225     CHAR *key = <a class="code" href="classXFuConfigurationData.html#b8">makePrefixedKey</a>(XFUCD_TYPE_SOUND_SHORT_CHAR, aKey);
00226     SoundSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a>-&gt;find(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(<a class="code" href="classXFuConfigurationData.html#a1">get</a>(key)));
00227     <span class="keyword">delete</span>[] key;
00228     <span class="keywordflow">if</span> (it.isValid())
00229         <span class="keywordflow">return</span> it.getValue();
00230     <span class="keywordflow">else</span>
00231         <span class="keywordflow">return</span> NULL;
00232 }
00233 
00234 
<a name="l00235"></a><a class="code" href="classXFuConfigurationData.html#a5">00235</a> <a class="code" href="classXFuConfigurationDataMusicInfo.html">XFuConfigurationDataMusicInfo</a> * <a class="code" href="classXFuConfigurationData.html#a5">XFuConfigurationData::getMusic</a>(<span class="keyword">const</span> CHAR *aKey)
00236 {
00237     XFCASSERT(aKey != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::getMusic"</span>);
00238     CHAR *key = <a class="code" href="classXFuConfigurationData.html#b8">makePrefixedKey</a>(XFUCD_TYPE_MUSIC_SHORT_CHAR, aKey);
00239     MusicSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a>-&gt;find(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(<a class="code" href="classXFuConfigurationData.html#a1">get</a>(key)));
00240     <span class="keyword">delete</span>[] key;
00241     <span class="keywordflow">if</span> (it.isValid())
00242         <span class="keywordflow">return</span> it.getValue();
00243     <span class="keywordflow">else</span>
00244         <span class="keywordflow">return</span> NULL;
00245 }
00246 
00247 
<a name="l00248"></a><a class="code" href="classXFuConfigurationData.html#a8">00248</a> INT <a class="code" href="classXFuConfigurationData.html#a8">XFuConfigurationData::load</a>(<span class="keyword">const</span> CHAR *aFilename)
00249 {
00250     XFCASSERT(aFilename != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::load(const CHAR *)"</span>);
00251     <span class="keywordflow">return</span> <a class="code" href="classXFuConfiguration.html#a7">XFuConfiguration::load</a>(aFilename);
00252 }
00253 
00254 
<a name="l00255"></a><a class="code" href="classXFuConfigurationData.html#a9">00255</a> INT <a class="code" href="classXFuConfigurationData.html#a8">XFuConfigurationData::load</a>(XFcFile *aFile)
00256 {
00257     XFCASSERT(aFile != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::load(XFcFile *)"</span>);
00258     <span class="keywordflow">return</span> <a class="code" href="classXFuConfiguration.html#a7">XFuConfiguration::load</a>(aFile);
00259 }
00260 
00261 
<a name="l00262"></a><a class="code" href="classXFuConfigurationData.html#a7">00262</a> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#a7">XFuConfigurationData::put</a>(<span class="keyword">const</span> CHAR *aKey, <span class="keyword">const</span> CHAR *aValue)
00263 {
00264     XFCASSERT(aKey != NULL &amp;&amp; aValue != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::put"</span>);
00265     <span class="keywordflow">if</span> (aKey == NULL || aKey[0] == 0)
00266         <span class="keywordflow">return</span>;
00267 
00268     <a class="code" href="classXFuTokenizer.html">XFuTokenizer</a> tok;
00269     tok.<a class="code" href="classXFuTokenizer.html#a2">tokenize</a>(aKey, XFUCD_TYPE_DELIMITER_STR);
00270 
00271     <span class="keywordflow">if</span> (tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 1)
00272     {
00273         CHAR reformatPrefix = 0;
00274         <span class="keyword">const</span> CHAR *type = tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(0);
00275         <span class="comment">// TODO: Add type registration interface.</span>
00276         <span class="keywordflow">if</span> (XFcStringToolkit::compare(type, XFUCD_TYPE_IMAGE_SHORT_STR) == 0 ||
00277             XFcStringToolkit::compare(type, XFUCD_TYPE_IMAGE_LONG) == 0)
00278         {
00279             reformatPrefix = <a class="code" href="XFuConfigurationData_8cpp.html#a2">XFUCD_TYPE_IMAGE_SHORT_CHAR</a>;
00280             <a class="code" href="classXFuConfigurationData.html#b2">addImage</a>(aValue);
00281         }
00282         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (XFcStringToolkit::compare(type, XFUCD_TYPE_PRINTER_SHORT_STR) == 0 ||
00283                  XFcStringToolkit::compare(type, XFUCD_TYPE_PRINTER_LONG) == 0)
00284         {
00285             reformatPrefix = <a class="code" href="XFuConfigurationData_8cpp.html#a5">XFUCD_TYPE_PRINTER_SHORT_CHAR</a>;
00286             <a class="code" href="classXFuConfigurationData.html#b3">addPrinter</a>(aValue);
00287         }
00288         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (XFcStringToolkit::compare(type, XFUCD_TYPE_SOUND_SHORT_STR) == 0 ||
00289                  XFcStringToolkit::compare(type, XFUCD_TYPE_SOUND_LONG) == 0)
00290         {
00291             reformatPrefix = <a class="code" href="XFuConfigurationData_8cpp.html#a8">XFUCD_TYPE_SOUND_SHORT_CHAR</a>;
00292             <a class="code" href="classXFuConfigurationData.html#b4">addSound</a>(aValue);
00293         }
00294         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (XFcStringToolkit::compare(type, XFUCD_TYPE_MUSIC_SHORT_STR) == 0 ||
00295                  XFcStringToolkit::compare(type, XFUCD_TYPE_MUSIC_LONG) == 0)
00296         {
00297             reformatPrefix = <a class="code" href="XFuConfigurationData_8cpp.html#a11">XFUCD_TYPE_MUSIC_SHORT_CHAR</a>;
00298             <a class="code" href="classXFuConfigurationData.html#b5">addMusic</a>(aValue);
00299         }
00300 
00301         <span class="comment">// If reformatPrefix is set, reformat the key with the shortened prefix</span>
00302         <span class="comment">// and add the entry with the revised key. Otherwise the original key</span>
00303         <span class="comment">// is added.</span>
00304         <span class="keywordflow">if</span> (reformatPrefix != 0)
00305         {
00306             <span class="keyword">const</span> CHAR *key = tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(1);
00307             CHAR *newkey = <span class="keyword">new</span> CHAR[XFcStringToolkit::getLength(key) + 3];
00308             XFcStringToolkit::format(newkey, <span class="stringliteral">"%c%c%s"</span>, reformatPrefix, XFUCD_TYPE_DELIMITER_CHAR, key);
00309             <a class="code" href="classXFuConfiguration.html#a5">XFuConfiguration::put</a>(newkey, aValue);
00310             <span class="keyword">delete</span>[] newkey;
00311         }
00312         <span class="keywordflow">else</span>
00313             <a class="code" href="classXFuConfiguration.html#a5">XFuConfiguration::put</a>(aKey, aValue);
00314     }
00315     <span class="keywordflow">else</span>
00316         <a class="code" href="classXFuConfiguration.html#a5">XFuConfiguration::put</a>(aKey, aValue);
00317 }
00318 
00319 
<a name="l00320"></a><a class="code" href="classXFuConfigurationData.html#b2">00320</a> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b2">XFuConfigurationData::addImage</a>(<span class="keyword">const</span> CHAR *aValue)
00321 {
00322     ImageSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n1">mImages</a>-&gt;find(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(aValue));
00323     <span class="keywordflow">if</span> (!it.isValid())
00324     {
00325         <a class="code" href="classXFuStringKey.html">XFuStringKey</a> valueKey(aValue);
00326         <a class="code" href="classXFuConfigurationData.html#n1">mImages</a>-&gt;put(valueKey, NULL);
00327 
00328         <span class="keywordflow">if</span> (!<a class="code" href="classXFuConfigurationData.html#n0">mDeferredLoadingEnabled</a>)
00329         {
00330             ImageSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n1">mImages</a>-&gt;find(valueKey);
00331             XFCASSERT(it.isValid() &amp;&amp; <span class="stringliteral">"XFuConfigurationData::addImage: Image property not found!"</span>);
00332             <a class="code" href="classXFuConfigurationData.html#b6">loadImage</a>(it);
00333         }
00334     }
00335 }
00336 
00337 
<a name="l00338"></a><a class="code" href="classXFuConfigurationData.html#b6">00338</a> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b6">XFuConfigurationData::loadImage</a>(ImageSet::iterator &amp;aIterator)
00339 {
00340     <span class="comment">// don't try load the image if it has already been loaded</span>
00341     <span class="keywordflow">if</span> (aIterator.getValue() != NULL)
00342         <span class="keywordflow">return</span>;
00343 
00344     <a class="code" href="classXFuTokenizer.html">XFuTokenizer</a> tok;
00345 
00346     CHAR *key = XFcStringToolkit::copy(aIterator.getKey().mKey);
00347     tok.<a class="code" href="classXFuTokenizer.html#a2">tokenize</a>(key, XFCSTR(<span class="stringliteral">","</span>));
00348     <span class="keyword">const</span> CHAR *filename = NULL;
00349     INT32 format = XFCGF_DEFAULT;
00350 
00351     <span class="keywordflow">if</span> (tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 1)
00352     {
00353         filename = tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(0);
00354         format = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(1));
00355     }
00356     <span class="keywordflow">else</span>
00357         filename = key;
00358 
00359     XFcGLResourceSurface *rs = XFcGLResourceSurface::create(filename, format);
00360     XFCASSERT(rs &amp;&amp; <span class="stringliteral">"XFuConfigurationData::loadImage: Cannot create resource surface image!"</span>);
00361     aIterator.setValue(rs);
00362 
00363     <span class="keyword">delete</span>[] key;
00364 }
00365 
00366 
<a name="l00367"></a><a class="code" href="classXFuConfigurationData.html#b3">00367</a> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b3">XFuConfigurationData::addPrinter</a>(<span class="keyword">const</span> CHAR *aValue)
00368 {
00369     PrinterSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>-&gt;find(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(aValue));
00370     <span class="keywordflow">if</span> (!it.isValid())
00371     {
00372         <a class="code" href="classXFuStringKey.html">XFuStringKey</a> valueKey(aValue);
00373         <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>-&gt;put(valueKey, NULL);
00374 
00375         <span class="keywordflow">if</span> (!<a class="code" href="classXFuConfigurationData.html#n0">mDeferredLoadingEnabled</a>)
00376         {
00377             PrinterSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n2">mPrinters</a>-&gt;find(valueKey);
00378             XFCASSERT(it.isValid() &amp;&amp; <span class="stringliteral">"XFuConfigurationData::addPrinter: Printer property not found!"</span>);
00379             <a class="code" href="classXFuConfigurationData.html#b7">loadPrinter</a>(it);
00380         }
00381     }
00382 }
00383 
00384 
<a name="l00385"></a><a class="code" href="classXFuConfigurationData.html#b7">00385</a> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b7">XFuConfigurationData::loadPrinter</a>(PrinterSet::iterator &amp;aIterator)
00386 {
00387     <span class="comment">// don't try load the printer if it has already been loaded</span>
00388     <span class="keywordflow">if</span> (aIterator.getValue() != NULL)
00389         <span class="keywordflow">return</span>;
00390 
00391     <a class="code" href="classXFuPrinter.html">XFuPrinter</a> *pr = NULL;
00392     <a class="code" href="classXFuTokenizer.html">XFuTokenizer</a> tok;
00393 
00394     CHAR *key = XFcStringToolkit::copy(aIterator.getKey().mKey);
00395     tok.<a class="code" href="classXFuTokenizer.html#a2">tokenize</a>(key, XFCSTR(<span class="stringliteral">","</span>));
00396     <span class="keyword">const</span> CHAR *filename = tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(0);
00397     XFCASSERT(tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt;= 3 &amp;&amp; <span class="stringliteral">"XFuConfigurationData::addPrinter: Not enough tokens for printer!"</span>);
00398     INT32 type = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(2));
00399     XFCASSERT((type == 0 || type == 1) &amp;&amp; <span class="stringliteral">"XFuConfigurationData::addPrinter: Unknown printer type!"</span>);
00400 
00401     <span class="keywordflow">if</span> (tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 3)
00402     {
00403         UINT32 colorkey = (UINT32)XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(3));
00404         <span class="keywordflow">if</span> (type == 0)
00405             pr = <a class="code" href="classXFuPrinter.html#d0">XFuPrinter::create</a>(filename, colorkey);
00406         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == 1)
00407             pr = <a class="code" href="classXFuRLESpritePrinter.html#d0">XFuRLESpritePrinter::create</a>(filename, 0xffffff, colorkey);
00408     }
00409     <span class="keywordflow">else</span>
00410     {
00411         <span class="keywordflow">if</span> (type == 0)
00412             pr = <a class="code" href="classXFuPrinter.html#d0">XFuPrinter::create</a>(filename);
00413         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == 1)
00414             pr = <a class="code" href="classXFuRLESpritePrinter.html#d0">XFuRLESpritePrinter::create</a>(filename);
00415     }
00416     XFCASSERT(pr != NULL &amp;&amp; <span class="stringliteral">"XFuConfigurationData::loadPrinter: Cannot create printer!"</span>);
00417     pr-&gt;<a class="code" href="classXFuPrinter.html#a5">setLetterSpacing</a>(XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(1)));
00418     aIterator.setValue(pr);
00419     
00420     <span class="keyword">delete</span>[] key;
00421 }
00422 
00423 
00424 <span class="comment">// TODO: Add possible loading of sound when sounds are changed to resources.</span>
<a name="l00425"></a><a class="code" href="classXFuConfigurationData.html#b4">00425</a> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b4">XFuConfigurationData::addSound</a>(<span class="keyword">const</span> CHAR *aValue)
00426 {
00427     SoundSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a>-&gt;find(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(aValue));
00428     <span class="keywordflow">if</span> (!it.isValid())
00429     {
00430         <a class="code" href="classXFuTokenizer.html">XFuTokenizer</a> tok;
00431 
00432         tok.<a class="code" href="classXFuTokenizer.html#a2">tokenize</a>(aValue, XFCSTR(<span class="stringliteral">","</span>));
00433 
00434         <a class="code" href="classXFuConfigurationDataSoundInfo.html">XFuConfigurationDataSoundInfo</a> *si = <span class="keyword">new</span> <a class="code" href="classXFuConfigurationDataSoundInfo.html">XFuConfigurationDataSoundInfo</a>;
00435 
00436         <span class="keywordflow">if</span> (tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() == 1)
00437         {
00438             si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m0">mFilename</a> = XFcStringToolkit::copy(aValue);
00439         }
00440         <span class="keywordflow">else</span>
00441         {
00442             si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m0">mFilename</a> = XFcStringToolkit::copy(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(0));
00443             <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 1) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(1)) != -1))
00444             {
00445                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m1">mSamplingRate</a> = XFcStringToolkit::toFLOAT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(1));
00446                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a1">XFUCDAIF_SAMPLING_RATE</a>;
00447             }
00448             <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 2) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(2)) != -1))
00449             {
00450                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m2">mVolume</a> = XFcStringToolkit::toFLOAT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(2));
00451                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a2">XFUCDAIF_VOLUME</a>;
00452             }
00453             <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 3) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(3)) != -1))
00454             {
00455                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m3">mPanning</a> = XFcStringToolkit::toFLOAT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(3));
00456                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a3">XFUCDAIF_PANNING</a>;
00457             }
00458             <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 4) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(4)) != -1))
00459             {
00460                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m4">mPriority</a> = (UINT16)XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(4));
00461                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a4">XFUCDAIF_PRIORITY</a>;
00462             }
00463             <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 5) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(5)) != -1))
00464             {
00465                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m5">mLooping</a> = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(5));
00466                 <span class="keywordflow">if</span> (si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m5">mLooping</a>) si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a5">XFUCDAIF_LOOPING</a>;
00467             }
00468             <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 6) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(6)) != -1))
00469             {
00470                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m6">mLoopStart</a> = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(6));
00471                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a6">XFUCDAIF_LOOPSTART</a>;
00472             }
00473             <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 7) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(7)) != -1))
00474             {
00475                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m7">mLoopEnd</a> = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(7));
00476                 si-&gt;<a class="code" href="classXFuConfigurationDataSoundInfo.html#m8">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a7">XFUCDAIF_LOOPEND</a>;
00477             }
00478         }
00479 
00480         <a class="code" href="classXFuConfigurationData.html#n3">mSounds</a>-&gt;put(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(aValue), si);
00481     }
00482 }
00483 
00484 
00485 <span class="comment">// TODO: Add possible loading of music when musics are changed to resources.</span>
<a name="l00486"></a><a class="code" href="classXFuConfigurationData.html#b5">00486</a> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#b5">XFuConfigurationData::addMusic</a>(<span class="keyword">const</span> CHAR *aValue)
00487 {
00488     MusicSet::iterator it = <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a>-&gt;find(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(aValue));
00489     <span class="keywordflow">if</span> (!it.isValid())
00490     {
00491         <a class="code" href="classXFuTokenizer.html">XFuTokenizer</a> tok;
00492 
00493         tok.<a class="code" href="classXFuTokenizer.html#a2">tokenize</a>(aValue, XFCSTR(<span class="stringliteral">","</span>));
00494 
00495         <a class="code" href="classXFuConfigurationDataMusicInfo.html">XFuConfigurationDataMusicInfo</a> *mi = <span class="keyword">new</span> <a class="code" href="classXFuConfigurationDataMusicInfo.html">XFuConfigurationDataMusicInfo</a>;
00496 
00497         XFCASSERT(<span class="stringliteral">"addMusic: Invalid amount of parameters for music resource"</span> &amp;&amp; tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt;= 4);
00498 
00499         mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m0">mFilename</a> = XFcStringToolkit::copy(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(0));
00500         mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m1">mSamplingRate</a> = XFcStringToolkit::toFLOAT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(1));
00501         mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m2">m16Bit</a> = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(2));
00502         mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m3">mStereo</a> = XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(3));
00503         mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m6">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a1">XFUCDAIF_SAMPLING_RATE</a>;
00504 
00505         <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 4) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(4)) != -1))
00506         {
00507             mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m4">mVolume</a> = XFcStringToolkit::toFLOAT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(4));
00508             mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m6">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a2">XFUCDAIF_VOLUME</a>;
00509         }
00510         <span class="keywordflow">if</span> ((tok.<a class="code" href="classXFuTokenizer.html#a6">getTokenCount</a>() &gt; 5) &amp;&amp; (XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(5)) != -1))
00511         {
00512             mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m5">mPriority</a> = (UINT16)XFcStringToolkit::toINT32(tok.<a class="code" href="classXFuTokenizer.html#a7">getToken</a>(5));
00513             mi-&gt;<a class="code" href="classXFuConfigurationDataMusicInfo.html#m6">mFlags</a> |= <a class="code" href="XFuConfigurationData_8h.html#a8a4">XFUCDAIF_PRIORITY</a>;
00514         }
00515 
00516         <a class="code" href="classXFuConfigurationData.html#n4">mMusics</a>-&gt;put(<a class="code" href="classXFuStringKey.html">XFuStringKey</a>(aValue), mi);
00517     }
00518 }
00519 
00520 
<a name="l00521"></a><a class="code" href="classXFuConfigurationData.html#a10">00521</a> <span class="keywordtype">void</span> <a class="code" href="classXFuConfigurationData.html#a10">XFuConfigurationData::setDeferredLoadingEnabled</a>(INT aEnabled)
00522 {
00523     <a class="code" href="classXFuConfigurationData.html#n0">mDeferredLoadingEnabled</a> = aEnabled;
00524 }
00525 
</pre></div><br clear=all>
<center><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=5><img src="paleblue.gif" width=600 height=1></td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;</td><td><a href="http://www.fathammer.com/"><img src="logo.gif" border=0></a></td>
<td valign=bottom><center><font face="arial, helvetica" size="-2" color="#003366">X-Forge Documentation<br>Confidential<br>Copyright &copy; 2002-2003 Fathammer</font></center></td><td>&nbsp;&nbsp;&nbsp;</td>
<td valign=bottom><center><font face="arial, helvetica" size="-2" color="#003366">Documentation generated<br>with <a href="http://www.doxygen.org/index.html">doxygen</a><br>by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a></font></center></td></tr></table>
</body></html>
