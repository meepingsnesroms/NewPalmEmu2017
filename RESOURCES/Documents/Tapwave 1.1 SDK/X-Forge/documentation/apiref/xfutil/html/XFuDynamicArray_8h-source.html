<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>XFuDynamicArray.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc3 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>XFuDynamicArray.h</h1><a href="XFuDynamicArray_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/*! \file </span>
00002 <span class="comment"> * X-Forge Util &lt;br&gt;</span>
00003 <span class="comment"> * Copyright 2000-2003 Fathammer Ltd</span>
00004 <span class="comment"> * </span>
00005 <span class="comment"> * \brief Dynamic array template</span>
00006 <span class="comment"> * </span>
00007 <span class="comment"> * $Id: XFuDynamicArray.h,v 1.10 2003/08/12 13:33:52 lars Exp $</span>
00008 <span class="comment"> * $Date: 2003/08/12 13:33:52 $</span>
00009 <span class="comment"> * $Revision: 1.10 $</span>
00010 <span class="comment"> */</span>
00011 
00012 <span class="preprocessor">#ifndef XFUDYNAMICARRAY_H_INCLUDED</span>
00013 <span class="preprocessor"></span><span class="preprocessor">#define XFUDYNAMICARRAY_H_INCLUDED</span>
00014 <span class="preprocessor"></span>
00015 <span class="comment"></span>
00016 <span class="comment">//! Default size increment for the element pointer array.</span>
<a name="l00017"></a><a class="code" href="XFuDynamicArray_8h.html#a0">00017</a> <span class="comment"></span><span class="preprocessor">#define XFUDYNAMICARRAY_DEFAULT_SIZE_INCREMENT 10</span>
00018 <span class="preprocessor"></span>
00019 <span class="comment"></span>
00020 <span class="comment">//! Dynamic array template.</span>
00021 <span class="comment"></span><span class="comment">/*! </span>
00022 <span class="comment"> * Simple usage example to store UINT32's:&lt;br&gt;</span>
00023 <span class="comment"> *</span>
00024 <span class="comment"> * \code</span>
00025 <span class="comment"> * // Create the array</span>
00026 <span class="comment"> * XFuDynamicArray&lt;UINT32&gt; *store = XFuDynamicArray&lt;UINT32&gt;::create();</span>
00027 <span class="comment"> * // put 3 values to the end of the array</span>
00028 <span class="comment"> * store-&gt;put(1);</span>
00029 <span class="comment"> * store-&gt;put(3);</span>
00030 <span class="comment"> * store-&gt;put(4);</span>
00031 <span class="comment"> * // Insert value in the second position of the array</span>
00032 <span class="comment"> * store-&gt;put(1, 2);</span>
00033 <span class="comment"> * // store now contains { 1, 2, 3, 4 }</span>
00034 <span class="comment"> * UINT32 value = store-&gt;get(3);</span>
00035 <span class="comment"> * // value is now 4</span>
00036 <span class="comment"> * delete store;</span>
00037 <span class="comment"> * \endcode</span>
00038 <span class="comment"> */</span>
<a name="l00039"></a><a class="code" href="classXFuDynamicArray.html">00039</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keyword">class </span><a class="code" href="classXFuDynamicArray.html">XFuDynamicArray</a>
00040 {
00041 <span class="keyword">protected</span>:<span class="comment"></span>
00042 <span class="comment">    //! The number of elements in the array.</span>
<a name="l00043"></a><a class="code" href="classXFuDynamicArray.html#n0">00043</a> <span class="comment"></span>    UINT32 <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>;<span class="comment"></span>
00044 <span class="comment">    //! Array of elements stored by the dynamic array.</span>
<a name="l00045"></a><a class="code" href="classXFuDynamicArray.html#n1">00045</a> <span class="comment"></span>    T *<a class="code" href="classXFuDynamicArray.html#n1">mElements</a>;
00046 <span class="comment"></span>
00047 <span class="comment">    //! Size increment.</span>
<a name="l00048"></a><a class="code" href="classXFuDynamicArray.html#n2">00048</a> <span class="comment"></span>    UINT32 <a class="code" href="classXFuDynamicArray.html#n2">mSizeIncrement</a>;
00049 <span class="comment"></span>
00050 <span class="comment">    //! The size of the element array.</span>
<a name="l00051"></a><a class="code" href="classXFuDynamicArray.html#n3">00051</a> <span class="comment"></span>    UINT32 <a class="code" href="classXFuDynamicArray.html#n3">mArraySize</a>;
00052 <span class="comment"></span>
00053 <span class="comment">    //! Resizes the element array.</span>
00054 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#b0">setArraySize</a>(<span class="keyword">const</span> UINT32 aSize);
00055 <span class="comment"></span>
00056 <span class="comment">    //! Protected constructor.</span>
00057 <span class="comment"></span>    <a class="code" href="classXFuDynamicArray.html#b1">XFuDynamicArray</a>();
00058 
00059 <span class="keyword">public</span>:<span class="comment"></span>
00060 <span class="comment">    //! Returns the size increment.</span>
00061 <span class="comment"></span>    UINT32 <a class="code" href="classXFuDynamicArray.html#a0">getSizeIncrement</a>() <span class="keyword">const</span>;<span class="comment"></span>
00062 <span class="comment">    //! Sets the size increment.</span>
00063 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#a1">setSizeIncrement</a>(<span class="keyword">const</span> UINT32 aSizeIncrement);<span class="comment"></span>
00064 <span class="comment">    //! Returns the number of elements stored in the array.</span>
00065 <span class="comment"></span>    UINT32 <a class="code" href="classXFuDynamicArray.html#a2">size</a>() <span class="keyword">const</span>;<span class="comment"></span>
00066 <span class="comment">    //! Returns the size of the array.</span>
00067 <span class="comment"></span>    UINT32 <a class="code" href="classXFuDynamicArray.html#a3">maxSize</a>() <span class="keyword">const</span>;<span class="comment"></span>
00068 <span class="comment">    //! Checks whether the array has any elements.</span>
00069 <span class="comment"></span>    INT <a class="code" href="classXFuDynamicArray.html#a4">isEmpty</a>() <span class="keyword">const</span>;
00070 <span class="comment"></span>
00071 <span class="comment">    //! Returns an element at the specified position in the array.</span>
00072 <span class="comment"></span>    T <a class="code" href="classXFuDynamicArray.html#a6">get</a>(<span class="keyword">const</span> UINT32 aPos) <span class="keyword">const</span>;<span class="comment"></span>
00073 <span class="comment">    //! Returns the last element from the array.</span>
00074 <span class="comment"></span>    T <a class="code" href="classXFuDynamicArray.html#a6">get</a>() <span class="keyword">const</span>;<span class="comment"></span>
00075 <span class="comment">    //! Adds an element to the end of the array.</span>
00076 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#a7">put</a>(T aElement);<span class="comment"></span>
00077 <span class="comment">    //! Inserts an element to the array at the specified position.</span>
00078 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#a7">put</a>(<span class="keyword">const</span> UINT32 aPos, T aElement);<span class="comment"></span>
00079 <span class="comment">    //! Removes an element from the array and returns the removed element.</span>
00080 <span class="comment"></span>    T <a class="code" href="classXFuDynamicArray.html#a9">removeIndex</a>(<span class="keyword">const</span> UINT32 aPos);<span class="comment"></span>
00081 <span class="comment">    //! Removes an element from the array.</span>
00082 <span class="comment"></span>    T <a class="code" href="classXFuDynamicArray.html#a11">remove</a>(T aElement);<span class="comment"></span>
00083 <span class="comment">    //! Removes the last element from the array and returns the removed element.</span>
00084 <span class="comment"></span>    T <a class="code" href="classXFuDynamicArray.html#a11">remove</a>();<span class="comment"></span>
00085 <span class="comment">    //! Clears the array, but does not free its internal storage.</span>
00086 <span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#a12">clear</a>();
00087 <span class="comment"></span>
00088 <span class="comment">    //! Static constructor.</span>
00089 <span class="comment"></span>    <span class="keyword">static</span> <a class="code" href="classXFuDynamicArray.html">XFuDynamicArray</a> * <a class="code" href="classXFuDynamicArray.html#d0">create</a>(<span class="keyword">const</span> UINT32 aSize = XFUDYNAMICARRAY_DEFAULT_SIZE_INCREMENT);<span class="comment"></span>
00090 <span class="comment">    //! Destructor.</span>
00091 <span class="comment"></span>    <a class="code" href="classXFuDynamicArray.html#a13">~XFuDynamicArray</a>();
00092 };
00093 
00094 
<a name="l00095"></a><a class="code" href="classXFuDynamicArray.html#b0">00095</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#b0">XFuDynamicArray&lt;T&gt;::setArraySize</a>(<span class="keyword">const</span> UINT32 aSize)
00096 {
00097     <a class="code" href="classXFuDynamicArray.html#n1">mElements</a> = (T *)realloc(mElements, aSize * <span class="keyword">sizeof</span>(T));
00098     <a class="code" href="classXFuDynamicArray.html#n3">mArraySize</a> = aSize;
00099 }
00100 
00101 
<a name="l00102"></a><a class="code" href="classXFuDynamicArray.html#b1">00102</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="classXFuDynamicArray.html#b1">XFuDynamicArray&lt;T&gt;::XFuDynamicArray</a>()
00103 {
00104     <a class="code" href="classXFuDynamicArray.html#n1">mElements</a> = NULL;
00105     <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a> = 0;
00106     <a class="code" href="classXFuDynamicArray.html#n3">mArraySize</a> = 0;
00107 }
00108 
00109 
<a name="l00110"></a><a class="code" href="classXFuDynamicArray.html#a0">00110</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; UINT32 <a class="code" href="classXFuDynamicArray.html#a0">XFuDynamicArray&lt;T&gt;::getSizeIncrement</a>()<span class="keyword"> const</span>
00111 <span class="keyword"></span>{
00112     <span class="keywordflow">return</span> <a class="code" href="classXFuDynamicArray.html#n2">mSizeIncrement</a>;
00113 }
00114 
00115 
00116 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
<a name="l00117"></a><a class="code" href="classXFuDynamicArray.html#a1">00117</a> <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#a1">XFuDynamicArray&lt;T&gt;::setSizeIncrement</a>(<span class="keyword">const</span> UINT32 aSizeIncrement)
00118 {
00119     <a class="code" href="classXFuDynamicArray.html#n2">mSizeIncrement</a> = aSizeIncrement;
00120 }
00121 
00122 
<a name="l00123"></a><a class="code" href="classXFuDynamicArray.html#a2">00123</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; UINT32 <a class="code" href="classXFuDynamicArray.html#a2">XFuDynamicArray&lt;T&gt;::size</a>()<span class="keyword"> const</span>
00124 <span class="keyword"></span>{
00125     <span class="keywordflow">return</span> <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>;
00126 }
00127 
00128 
<a name="l00129"></a><a class="code" href="classXFuDynamicArray.html#a3">00129</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; UINT32 <a class="code" href="classXFuDynamicArray.html#a3">XFuDynamicArray&lt;T&gt;::maxSize</a>()<span class="keyword"> const</span>
00130 <span class="keyword"></span>{
00131     <span class="keywordflow">return</span> <a class="code" href="classXFuDynamicArray.html#n3">mArraySize</a>;
00132 }
00133 
00134 
<a name="l00135"></a><a class="code" href="classXFuDynamicArray.html#a4">00135</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; INT <a class="code" href="classXFuDynamicArray.html#a4">XFuDynamicArray&lt;T&gt;::isEmpty</a>()<span class="keyword"> const</span>
00136 <span class="keyword"></span>{
00137     <span class="keywordflow">if</span> (<a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a> &gt; 0)
00138         <span class="keywordflow">return</span> 0;
00139     <span class="keywordflow">else</span>
00140         <span class="keywordflow">return</span> 1;
00141 }
00142 
00143 
<a name="l00144"></a><a class="code" href="classXFuDynamicArray.html#a5">00144</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; T <a class="code" href="classXFuDynamicArray.html#a6">XFuDynamicArray&lt;T&gt;::get</a>(<span class="keyword">const</span> UINT32 aPos)<span class="keyword"> const</span>
00145 <span class="keyword"></span>{
00146     <span class="keywordflow">if</span> (aPos &gt;= <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>)
00147         <span class="keywordflow">return</span> T();
00148     <span class="keywordflow">else</span>
00149         <span class="keywordflow">return</span> <a class="code" href="classXFuDynamicArray.html#n1">mElements</a>[aPos];
00150 }
00151 
00152 
<a name="l00153"></a><a class="code" href="classXFuDynamicArray.html#a6">00153</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; T <a class="code" href="classXFuDynamicArray.html#a6">XFuDynamicArray&lt;T&gt;::get</a>()<span class="keyword"> const</span>
00154 <span class="keyword"></span>{
00155     <span class="keywordflow">if</span> (<a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a> == 0)
00156         <span class="keywordflow">return</span> T();
00157     <span class="keywordflow">else</span>
00158         <span class="keywordflow">return</span> <a class="code" href="classXFuDynamicArray.html#n1">mElements</a>[<a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a> - 1];
00159 }
00160 
00161 
<a name="l00162"></a><a class="code" href="classXFuDynamicArray.html#a7">00162</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#a7">XFuDynamicArray&lt;T&gt;::put</a>(T aElement)
00163 {
00164     <a class="code" href="classXFuDynamicArray.html#a7">put</a>(mElementCount, aElement);
00165 }
00166 
00167 
<a name="l00168"></a><a class="code" href="classXFuDynamicArray.html#a8">00168</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#a7">XFuDynamicArray&lt;T&gt;::put</a>(<span class="keyword">const</span> UINT32 aPos, T aElement)
00169 {
00170     <span class="keywordflow">if</span> (aPos &gt; <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>) <span class="keywordflow">return</span>;
00171 
00172     <span class="keywordflow">if</span> (<a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a> &gt;= <a class="code" href="classXFuDynamicArray.html#n3">mArraySize</a>) 
00173         <a class="code" href="classXFuDynamicArray.html#b0">setArraySize</a>(mArraySize + mSizeIncrement);
00174 
00175     <span class="keywordflow">if</span> (aPos &lt; <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>)
00176     {
00177         UINT32 i;
00178         <span class="keywordflow">for</span> (i = <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>; i &gt; aPos; --i)
00179         {
00180             <a class="code" href="classXFuDynamicArray.html#n1">mElements</a>[i] = <a class="code" href="classXFuDynamicArray.html#n1">mElements</a>[i - 1];
00181         }
00182     }
00183 
00184     <a class="code" href="classXFuDynamicArray.html#n1">mElements</a>[aPos] = aElement;
00185 
00186     <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>++;
00187 }
00188 
00189 
<a name="l00190"></a><a class="code" href="classXFuDynamicArray.html#a9">00190</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; T <a class="code" href="classXFuDynamicArray.html#a9">XFuDynamicArray&lt;T&gt;::removeIndex</a>(<span class="keyword">const</span> UINT32 aPos)
00191 {
00192     <span class="keywordflow">if</span> (aPos &gt;= <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>) <span class="keywordflow">return</span> T();
00193 
00194     T element = <a class="code" href="classXFuDynamicArray.html#n1">mElements</a>[aPos];
00195 
00196     UINT32 i, lastElement;
00197     lastElement = <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a> - 1;
00198     <span class="keywordflow">for</span> (i = aPos; i &lt; lastElement; ++i)
00199     {
00200         mElements[i] = mElements[i + 1];
00201     }
00202 
00203     <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>--;
00204 
00205     <span class="keywordflow">return</span> element;
00206 }
00207 
00208 
<a name="l00209"></a><a class="code" href="classXFuDynamicArray.html#a11">00209</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; T <a class="code" href="classXFuDynamicArray.html#a11">XFuDynamicArray&lt;T&gt;::remove</a>()
00210 {
00211     <span class="keywordflow">return</span> <a class="code" href="classXFuDynamicArray.html#a9">removeIndex</a>(mElementCount - 1);
00212 }
00213 
00214 
<a name="l00215"></a><a class="code" href="classXFuDynamicArray.html#a10">00215</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; T <a class="code" href="classXFuDynamicArray.html#a11">XFuDynamicArray&lt;T&gt;::remove</a>(T aElement)
00216 {
00217     UINT32 i;
00218     <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a>; ++i)
00219     {
00220         <span class="keywordflow">if</span> (<a class="code" href="classXFuDynamicArray.html#n1">mElements</a>[i] == aElement) <span class="keywordflow">return</span> <a class="code" href="classXFuDynamicArray.html#a9">removeIndex</a>(i);
00221     }
00222 
00223     <span class="keywordflow">return</span> T();
00224 }
00225 
00226 
<a name="l00227"></a><a class="code" href="classXFuDynamicArray.html#a12">00227</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <span class="keywordtype">void</span> <a class="code" href="classXFuDynamicArray.html#a12">XFuDynamicArray&lt;T&gt;::clear</a>()
00228 {
00229     <a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a> = 0;
00230 }
00231 
00232 
00233 <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; 
<a name="l00234"></a><a class="code" href="classXFuDynamicArray.html#d0">00234</a> <a class="code" href="classXFuDynamicArray.html">XFuDynamicArray&lt;T&gt;</a> * <a class="code" href="classXFuDynamicArray.html#d0">XFuDynamicArray&lt;T&gt;::create</a>(<span class="keyword">const</span> UINT32 aSize)
00235 {
00236     <a class="code" href="classXFuDynamicArray.html">XFuDynamicArray&lt;T&gt;</a> *xfuda = <span class="keyword">new</span> <a class="code" href="classXFuDynamicArray.html">XFuDynamicArray&lt;T&gt;</a>();
00237     <span class="keywordflow">if</span> (xfuda == NULL) <span class="keywordflow">return</span> NULL;
00238     xfuda-&gt;<a class="code" href="classXFuDynamicArray.html#n1">mElements</a> = (T *)malloc(aSize * <span class="keyword">sizeof</span>(T));
00239     xfuda-&gt;<a class="code" href="classXFuDynamicArray.html#n0">mElementCount</a> = 0;
00240     xfuda-&gt;<a class="code" href="classXFuDynamicArray.html#n3">mArraySize</a> = aSize;
00241     xfuda-&gt;<a class="code" href="classXFuDynamicArray.html#n2">mSizeIncrement</a> = <a class="code" href="XFuDynamicArray_8h.html#a0">XFUDYNAMICARRAY_DEFAULT_SIZE_INCREMENT</a>;
00242 
00243     <span class="keywordflow">return</span> xfuda;
00244 }
00245 
00246 
<a name="l00247"></a><a class="code" href="classXFuDynamicArray.html#a13">00247</a> <span class="keyword">template</span>&lt;<span class="keyword">class</span> T&gt; <a class="code" href="classXFuDynamicArray.html#a13">XFuDynamicArray&lt;T&gt;::~XFuDynamicArray</a>()
00248 {
00249     <span class="keywordflow">if</span> (<a class="code" href="classXFuDynamicArray.html#n1">mElements</a> != NULL) 
00250     {
00251         free(mElements);
00252         <a class="code" href="classXFuDynamicArray.html#n1">mElements</a> = NULL;
00253     }
00254 }
00255 
00256 
00257 <span class="preprocessor">#endif // !XFUDYNAMICARRAY_H_INCLUDED</span>
00258 <span class="preprocessor"></span>
</pre></div><br clear=all>
<center><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=5><img src="paleblue.gif" width=600 height=1></td></tr>
<tr><td>&nbsp;&nbsp;&nbsp;</td><td><a href="http://www.fathammer.com/"><img src="logo.gif" border=0></a></td>
<td valign=bottom><center><font face="arial, helvetica" size="-2" color="#003366">X-Forge Documentation<br>Confidential<br>Copyright &copy; 2002-2003 Fathammer</font></center></td><td>&nbsp;&nbsp;&nbsp;</td>
<td valign=bottom><center><font face="arial, helvetica" size="-2" color="#003366">Documentation generated<br>with <a href="http://www.doxygen.org/index.html">doxygen</a><br>by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a></font></center></td></tr></table>
</body></html>
